language: python

jobs:
  include:
    - python: "3.6"
      install:
      - "touch .env"
      - "docker build . -t jobsdone --build-arg SETUPTOOLS_SCM_PRETEND_VERSION=0.1"
      script:
      - "docker run jobsdone pytest src --color=yes"

    - stage: "deploy"
      python: "3.6"
      install: pip install -U setuptools setuptools_scm
      script: skip

      deploy:
        provider: pypi
        user: nicoddemus
        distributions: sdist bdist_wheel
        skip_upload_docs: true
        password:
          secure: mBh1x6xl9sXmXGmPKCX0A1dTLoNDCbB/zWHBYJxd/u31tiMVe1owIdQcIXV8XcuD5iyZK0KCXmF/R4df8exBCntUSz5J1aYNtnL3RfMFYHGQxVAyEraSavXWD1CRgXi53DxPrqQ2Kf1hI/9e0wNmuFU6BfzrT+Ub0PoaPTZCPqEHIO/67nN9b6H9lC6i7z3pkeySqnJ3jbMmta+L28MXC3EPsrfZsoBBpFeyhDCtJKvhnmiBZbrpeqkYUPyn/I+CzOdnkfysaSh2oVaEhi8ISKFmiv3auPldHV8ljf40aEDLMVjGZWzLl5sYnZKhkCa703R1PNxusjftCdio2G6zJMdghgNvk4mj6Q+FrlRm+r9MboNyLI4ags2cHQyHQJRMHQja9gj+L6pPrOBU07F4g42Jta5U3no4714Hir507kxU/rD4Fdpcps9tLmXjf/tvU637OFAnopCBDtmhJyslbsigwdIfZA7n0COwp+3cbaYMTGqGTkkaYydtp0nCLbi3bgtv7vZZ944VQm0QQG09oYz4qlCRNLHBqbK0XLHXJ5ZstB4A/V6IJ4dIevyUjbohXnZkwB6T2TzUiKKntSVYGcqRa7pZSLDqeZTEb2hCcCBKqUARv/X1qXygw8q1PODjSXWY3XLCcXgy1ythQV6kd5R1uHLcMX8YM2ucl8PB0+Q=
        on:
          tags: true
          repo: ESSS/jobs_done10

